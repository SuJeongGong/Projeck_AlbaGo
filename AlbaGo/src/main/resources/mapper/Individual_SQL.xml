<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spring.ex.dao.IndividualDAO">

	<select id="selectIndividual" parameterType="String"
		resultType="Individual">
		select *
		from individual
		<where>
			individual_id = #{id}
		</where>
	</select>

	<select id="selectScrap" parameterType="String" resultType="Scrap_Individual">
		SELECT board_recruit.title AS title, 
				scrap_individual.date AS DATE,
				board_recruit.date AS recruit_date, 
				enterprise.name as name
		from
		scrap_individual, board_recruit , recruit,enterprise
		<where>
				scrap_individual.board_recruit_id =board_recruit.board_recruit_id
			AND recruit.recruit_id = board_recruit.recruit_id
			AND enterprise.enterprise_id = recruit.enterprise_id
	</where>
		group by individual_id
		HAVING individual_id = #{id}
	</select>

	<select id="selectVolunteer" parameterType="String"
		resultType="Volunteer">
		SELECT board_recruit.title AS title,
				enterprise.name AS NAME,
				resume.title AS tresume_title,
				volunteer.date AS DATE,
				volunteer.result
				
		FROM board_recruit,enterprise,resume,volunteer,recruit
		<where>board_recruit.recruit_id = recruit.recruit_id 
			AND recruit.enterprise_id = enterprise.enterprise_id
			AND volunteer.resume_id = resume.resume_id
			AND volunteer.board_recruit_id = board_recruit.board_recruit_id
				AND volunteer.individual_id = #{id}
		</where>
	</select>

	<select id="selectResume" parameterType="String" resultType="Resume">
		SELECT *
		FROM resume
		<where>
			individual_id = #{id}
		</where>
	</select>

	<update id="updateAccount" parameterType="Individual">
		update individual 
		set name = #{name},
			gender = #{gender},
			birth = #{birth},
			phone = #{phone},
			education = #{education}
		<where>
			individual_id = #{individual_id}
		</where>
	</update>
</mapper>