<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spring.ex.dao.BoardResumeDAO">
	<!-- 공고글 리스트 -->
	<select id = "selectList" resultType="BoardResume">
		select board_resume.board_resume_id, board_resume.title, board_resume.date, board_resume.views, resume.place 
		from resume, board_resume
		where resume.resume_id = board_resume.resume_id
		and board_resume.delete_check = 1
	</select>
	
	<!-- 인재글 작성 -->
	<insert id = "insertBoard_resume" parameterType="BoardResume">
		insert into board_resume
		(
			board_resume_id,
			resume_id,
			title,
			views,
			memo,
			date,
			delete_check
		)
		values
		(
			null,
			#{resume_id},
			#{title},
			0,
			#{memo},
			null,
			1
		)
	</insert>
	
	<!-- 글보여주기 -->
	<select id = "selectView" resultType="BoardResume" parameterType="int">
		SELECT individual.individual_id, individual.`name`, individual.gender, individual.birth, individual.phone, individual.education, 
		resume.place, resume.salary_type, resume.salary_amount, resume.category, resume.term, resume.`time`, resume.`day`,  
		board_resume.title, board_resume.memo, board_resume.`date`, board_resume.delete_check
		FROM individual, resume, board_resume
		WHERE individual.individual_id = resume.individual_id
		AND resume.resume_id = board_resume.resume_id
		AND board_resume.board_resume_id = #{id}
		AND board_resume.delete_check = 1
	</select>
	
	<!-- 글삭제 -->
	<delete id="deleteBoard" parameterType="int">
		UPDATE board_resume
		SET delete_check = 0
		WHERE board_resume_id = #{board_resume_id}
	</delete>
	
	<!-- 글 수정 -->
	<update id="updateBoard" parameterType="BoardResume">
		UPDATE board_resume
		SET title = #{title},
			memo = #{memo}
		<where>
			board_resume_id = #{board_resume_id}
		</where>
	</update>
	
</mapper>